<!-- Mini JS vendors, globally used -->
{{ $timeago := resources.Get "js/vendor/timeago.js" }}


<!-- App JS -->
{{ $util := resources.Get "js/util.js" }}
{{ $search := resources.Get "js/search.js" }}
{{ $nav := resources.Get "js/nav.js" }}
{{ $toc := resources.Get "js/toc.js" }}
{{ $content := resources.Get "js/content.js" }}
{{ $modal := resources.Get "js/modal.js" }}
{{ $document := resources.Get "js/document.js" }}
{{ $applicant := resources.Get "js/applicant.js" }}
{{ $clipboard := resources.Get "js/clipboard.js" }}

{{ $js := slice $timeago $util $search $nav $toc $content $modal $document $applicant $clipboard }}

{{ $js = $js | resources.Concat "main.js" }}

{{ if eq (hugo.Environment) "development" -}}
  <script defer src="{{ $js.Permalink }}"></script>
{{ else }}
  {{ $js = $js | minify | fingerprint }}


  <script
    defer
    src="{{ $js.Permalink }}"
    {{ if .Site.Params.options.useSRI }}
      integrity="{{ $js.Data.Integrity }}"
    {{ end }}
    crossorigin="anonymous"
  ></script>
{{ end }}


<!-- Mermaid -->
{{ if .Page.Store.Get "hasMermaid" }}
  <script src="https://unpkg.com/mermaid@9.1.5/dist/mermaid.min.js"></script>
{{ end }}


<!-- PlantUML encoder -->
{{ if .Page.Store.Get "hasPlantUML" }}
  <script src="https://cdn.jsdelivr.net/npm/plantuml-encoder@1.4.0/dist/plantuml-encoder.min.js"></script>
{{ end }}


<!-- Flexsearch -->
{{ if .Page.Store.Get "hasFlexsearch" }}
  <script src="https://rawcdn.githack.com/nextapps-de/flexsearch/0.7.2/dist/flexsearch.bundle.js"></script>
{{ end }}


<!-- Quill -->
{{ if .Page.Store.Get "hasQuill" }}
  <link
    rel="stylesheet"
    href="//cdn.jsdelivr.net/npm/quilljs-markdown@latest/dist/quilljs-markdown-common-style.css"
  />
  <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/quilljs-markdown@latest/dist/quilljs-markdown.js"></script>
  <script src="https://unpkg.com/turndown/dist/turndown.js"></script>
{{ end }}
